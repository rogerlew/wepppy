# README Authoring and Refinement Guide

> **Purpose:** Standard template and guidelines for creating and maintaining README.md files across the wepppy repository.

## Why README Files Matter

Well-crafted README files serve multiple critical purposes:

1. **Submodule Landing Page on GitHub** — First impression for developers browsing the repository
2. **Search Engine Optimization** — Indexed by GitHub and web search engines for discoverability
3. **Developer Onboarding** — Quick reference for understanding module purpose and usage
4. **AI Agent Context** — Provides structured context for AI coding assistants navigating the codebase
5. **Living Documentation** — Keeps knowledge current alongside code changes

## README Template

A comprehensive template is available at:
- **Location:** `docs/templates/README_TEMPLATE.md`
- **Usage:** Copy template to your module directory and customize each section

### Template Sections

The standard template includes:

#### 1. Header & Overview
- **Module name** with one-line value proposition
- **"See also" reference** to relevant AGENTS.md sections
- **Overview paragraph** explaining what, why, and how it fits into wepppy

#### 2. Quick Start
- **Minimal working example** showing the most common use case
- Code snippets in appropriate language (Python, Bash, JavaScript, Go)
- Enough context to run the example successfully

#### 3. Components At A Glance
- **Table listing key classes/functions** with brief descriptions
- Helps readers quickly locate relevant code

#### 4. Architecture / Design
- **Key patterns** used in the module
- **Data flow diagrams** (ASCII art acceptable)
- **Integration points** with other wepppy components
- **External dependencies** (Redis, Rust, microservices)

#### 5. Usage / API Reference
- **Primary classes** with purpose and key APIs
- **Helper functions** with parameters and returns
- **Configuration options** in table format
- **Working code examples** for each major feature

#### 6. Common Workflows
- **Step-by-step guides** for typical tasks
- **Code examples** for each step
- **Expected outcomes** and validation steps

#### 7. File Structure
- **Directory tree** showing module organization
- **Brief descriptions** of each file's purpose

#### 8. Produced Artifacts / Outputs
- **Table of output files** generated by the module
- **Descriptions** of each artifact's content and purpose
- **File formats** and schema information where applicable

#### 9. Testing
- **Commands** to run module tests
- **Coverage** expectations
- **Integration test** guidance

#### 10. Operational Notes
- **Performance considerations** for production use
- **Common gotchas** and pitfalls to avoid
- **Monitoring** metrics and logs to watch
- **Dependencies** on external services

#### 11. Development Notes
- **Patterns** to follow when extending
- **Type hints** and annotation expectations
- **Documentation standards** for docstrings
- **Testing requirements** for new features

#### 12. Troubleshooting
- **Common problems** with symptoms and solutions
- **Diagnostic commands** for investigation
- **Workarounds** for known issues

#### 13. References
- **Links** to related documentation
- **External resources** (papers, specifications)
- **Related modules** and microservices

#### 14. Version History / Changelog
- **Major changes** with dates and descriptions
- **Breaking changes** clearly highlighted

## README Quality Standards

### Content Requirements

✅ **Required Elements:**
- Clear module name and purpose statement
- Link to relevant AGENTS.md sections
- At least one working code example
- Description of key classes/functions
- Integration points with other components

✅ **Recommended Elements:**
- Architecture diagrams or data flow
- Common workflows with examples
- Troubleshooting section for complex modules
- Testing guidance
- Operational notes for production modules

✅ **Optional Elements:**
- Version history (for mature modules)
- Detailed API reference (when not in docstrings)
- Performance benchmarks
- Security considerations

### Writing Style

- **Concise and scannable** — Use headings, tables, and lists
- **Technical but accessible** — Balance detail with readability
- **Example-driven** — Show, don't just tell
- **Current and accurate** — Keep in sync with code
- **Link instead of duplicate** — Reference AGENTS.md and other docs

### American English Normalization

After editing README files, run the `uk2us` tool to normalize British spellings:

```bash
# Always preview changes first
diff -u path/to/README.md <(uk2us path/to/README.md)

# Review carefully to avoid breaking code blocks or technical terms

# Apply after verification
uk2us -i path/to/README.md
```

**Important:** Only apply `uk2us` to prose, comments, and documentation. Do not modify:
- Code identifiers
- String literals
- Technical terms
- URLs or file paths

## Section Customization Guide

### When to Include/Exclude Sections

| Section | Include When | Omit When |
| --- | --- | --- |
| **Quick Start** | Module is directly usable | Pure utility/helper module |
| **Components Table** | Multiple classes/functions | Single-purpose module |
| **Architecture** | Complex design patterns | Simple utility functions |
| **Common Workflows** | Multi-step processes | Single API call sufficient |
| **File Structure** | Package with multiple files | Single-file module |
| **Produced Artifacts** | Module generates files | Pure in-memory processing |
| **Troubleshooting** | Known issues or gotchas | Stable, well-understood module |
| **Version History** | Breaking changes occurred | New or stable module |

### Adapting for Different Module Types

#### NoDb Controllers
- Emphasize singleton pattern and `getInstance()`
- Document locking semantics with `locked()` context manager
- Explain Redis integration (DB allocation, caching)
- Show serialization and persistence patterns

#### Flask Routes/Blueprints
- Document URL patterns and HTTP methods
- Explain authorization requirements
- Show request/response payloads
- Link to relevant UI templates

#### Microservices (Go/Python)
- Document service endpoint URLs
- Explain configuration via environment variables
- Show Docker Compose integration
- Detail health check endpoints and monitoring

#### Utility Modules
- Focus on API reference with examples
- Document parameters and return types
- Show common usage patterns
- Explain error handling

#### Data Processing Modules
- Document input/output formats
- Show data flow and transformations
- Explain schema requirements
- Provide sample data examples

## Creating a New README

### Step-by-Step Process

1. **Copy the template**
   ```bash
   cp docs/templates/README_TEMPLATE.md your/module/README.md
   ```

2. **Fill in the header**
   - Choose a clear, descriptive module name
   - Write a compelling one-line description
   - Identify relevant AGENTS.md sections to reference

3. **Write the overview**
   - Explain what the module does
   - Describe the problem it solves
   - Show how it fits into wepppy's architecture

4. **Add a quick start example**
   - Use the simplest common case
   - Include all necessary imports
   - Show expected output or outcome

5. **Document components**
   - List all public classes and functions
   - Describe their roles in one line
   - Organize by importance or usage frequency

6. **Explain architecture**
   - Describe key design patterns
   - Draw data flow diagrams
   - Document integration points

7. **Provide usage examples**
   - Cover major use cases
   - Show parameter variations
   - Include error handling examples

8. **Remove unused sections**
   - Delete sections that don't apply
   - Don't leave placeholder text
   - Keep only relevant content

9. **Normalize spelling**
   ```bash
   diff -u your/module/README.md <(uk2us your/module/README.md)
   uk2us -i your/module/README.md
   ```

10. **Review and refine**
    - Test all code examples
    - Check links to other docs
    - Verify technical accuracy
    - Run through the quality checklist

## Refining Existing READMEs

### Audit Criteria

When evaluating existing README files, check for:

- [ ] **Clarity** — Is the purpose immediately obvious?
- [ ] **Completeness** — Are key APIs documented?
- [ ] **Currency** — Is content accurate with current code?
- [ ] **Examples** — Are there working code samples?
- [ ] **Links** — Do cross-references work?
- [ ] **Structure** — Does it follow the template pattern?
- [ ] **Searchability** — Will it be found by relevant searches?

### Revision Priorities

**High Priority (Fix Immediately):**
- Missing or extremely minimal READMEs
- Incorrect or outdated information
- Broken examples or code snippets
- Dead links to documentation

**Medium Priority (Next Sprint):**
- Missing architecture or design sections
- Lack of usage examples
- Incomplete API documentation
- Missing troubleshooting guidance

**Low Priority (Future Enhancement):**
- Adding diagrams or visualizations
- Expanding version history
- Adding performance benchmarks
- Creating video walkthroughs

### Incremental Improvement Strategy

1. **Start with the header** — Fix title, description, and links
2. **Add one example** — Include at least one working snippet
3. **Document key APIs** — Cover the most-used classes/functions
4. **Link to AGENTS.md** — Connect to broader documentation
5. **Repeat over time** — Continuously improve as code evolves

## Integration with AGENTS.md

README files should complement, not duplicate, AGENTS.md:

| README Focus | AGENTS.md Focus |
| --- | --- |
| Module-specific details | Repository-wide patterns |
| API usage examples | Architectural principles |
| File locations and structure | Development workflows |
| Troubleshooting specifics | General best practices |
| Configuration options | System integration |

### Cross-Referencing Pattern

Always include a "See also" reference at the top of README files:

```markdown
> **See also:** [AGENTS.md](../../AGENTS.md) for NoDb Controllers, 
> Module Organization Best Practices, and Redis Integration sections.
```

This establishes context hierarchy:
1. **README** — Module-specific reference
2. **AGENTS.md** — Repository-wide guide
3. **ARCHITECTURE.md** — System design overview
4. **API_REFERENCE.md** — Comprehensive API catalog

## Maintenance Guidelines

### When to Update README

Update the README when you:
- Add or remove public APIs
- Change module architecture
- Introduce breaking changes
- Add new dependencies
- Discover common issues/gotchas
- Improve performance characteristics
- Add significant features

### Version Control

- **Commit README with code changes** — Keep documentation in sync
- **Review README in PRs** — Ensure accuracy and completeness
- **Link commits in changelog** — For significant changes

### Automation Opportunities

Consider creating tools to:
- Generate API reference from docstrings
- Validate code examples in README
- Check for dead links
- Enforce template structure
- Track README coverage across modules

## Tools and Resources

### Useful Commands

```bash
# Find all README files
find . -name "README.md" -o -name "readme.md"

# Search for READMEs missing key sections
grep -L "## Overview" **/README.md

# Count lines in README files
wc -l **/README.md

# Normalize British spellings
uk2us -i path/to/README.md
```

### Markdown Tools

- **Preview:** Use VS Code Markdown Preview or GitHub web interface
- **Linting:** Consider markdownlint for consistency
- **Tables:** Use online table generators for complex tables
- **Diagrams:** Use ASCII art or link to external diagrams

### Example README Files

Refer to these well-documented modules as examples:
- `/wepppy/nodb/README.md` — Comprehensive technical reference
- `/wepppy/weppcloud/README.md` — Route organization guide
- `/wepppy/weppcloud/controllers_js/README.md` — Frontend architecture
- `/services/status2/README.md` — Microservice specification
- `/wepppy/nodb/mods/ash_transport/README.md` — Complete module guide

## AI Agent Guidance

When working with AI coding assistants:

1. **Provide README context** — Share relevant README sections in prompts
2. **Request README updates** — Ask agents to update docs alongside code
3. **Use template** — Point agents to the template for new READMEs
4. **Review AI-generated content** — Verify technical accuracy
5. **Iterate** — Refine AI output through multiple passes

## Checklist for README Reviewers

When reviewing README pull requests:

- [ ] Header includes clear module name and purpose
- [ ] "See also" links to relevant AGENTS.md sections
- [ ] Overview explains what, why, and how
- [ ] At least one working code example included
- [ ] Key APIs documented with descriptions
- [ ] Integration points identified
- [ ] Code examples are tested and accurate
- [ ] Links to other docs are working
- [ ] Spelling normalized to American English
- [ ] Follows template structure (where applicable)
- [ ] Appropriate sections included/excluded
- [ ] Content is current with code
- [ ] Writing is clear and scannable

## Summary

High-quality README files are essential for:
- **Developer productivity** — Quick understanding and onboarding
- **Code discoverability** — Search engine visibility
- **Knowledge preservation** — Documentation alongside code
- **AI agent effectiveness** — Structured context for assistants

Use the template, follow the guidelines, and continuously improve documentation as the codebase evolves.

---

**Template Location:** `docs/templates/README_TEMPLATE.md`  
**Related Documentation:** AGENTS.md, ARCHITECTURE.md, API_REFERENCE.md  
**Last Updated:** 2025-10-20
