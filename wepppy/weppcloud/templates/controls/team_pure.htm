{# Doc: controllers_js/README.md â€” Team Controller Reference (2026 helper migration) #}
{% import "controls/_pure_macros.html" as ui %}
{% from "shared/console_macros.htm" import button_row %}

{% set description %}
  <p class="wc-text-muted">
    Share this project with other WEPPcloud users by inviting collaborators. Invited users can view and,
    unless the project is readonly, modify the run. Public projects remain visible to anyone with the URL.
  </p>
{% endset %}

{% set status_panel_override %}
  {% call ui.status_panel(
       id="team_status_panel",
       title="Status",
       variant="compact",
       log_id="status",
       height="4rem"
     ) %}
    <div id="rq_job" class="wc-status-panel__meta" aria-live="polite"></div>
    <span id="braille" class="wc-status-panel__meta" aria-hidden="true"></span>
  {% endcall %}
{% endset %}

{% call ui.control_shell(
     form_id="team_form",
     title="Project Collaborators",
     collapsible=False,
     description=description,
     status_panel_override=status_panel_override,
     summary_panel_override=ui.legacy_summary_panel(),
     stacktrace_panel_override=ui.stacktrace_panel(
       id="team_stacktrace_panel",
       summary="Details",
       collapsed=True,
       body_id="stacktrace",
       empty_state="No stack trace recorded."
     )
   ) %}

  <div class="wc-stack">
    {{ ui.text_field(
         "adduser-email",
         "Invite collaborator (email address)",
         value="",
         placeholder="user@example.com",
         attrs={
           "autocomplete": "email",
           "inputmode": "email",
           "spellcheck": "false",
           "class": "disable-readonly",
           "data-team-field": "email"
         }
       ) }}

    {% call button_row() %}
      <button
        id="btn_adduser"
        type="button"
        class="pure-button pure-button-primary disable-readonly"
        data-team-action="invite">
        Add User
      </button>
    {% endcall %}

    {{ ui.job_hint("hint_run_team", extra_class="wc-field__help") }}

    <div id="team-info" class="wc-text-display"></div>
  </div>

{% endcall %}
