{# Doc: controllers_js/README.md â€” Observed Controller Reference (2025 helper migration) #}
{% import "controls/_pure_macros.html" as ui %}
{% from "shared/console_macros.htm" import button_row %}

{% set description %}
  <p class="wc-text-muted">
    Provide observed daily values in comma-separated format. Include a <code>Date</code> column
    (<abbr title="month/day/year">MM/DD/YYYY</abbr>) plus any observed measures that match model outputs:
    Streamflow (mm), Sed Del (kg), Total&nbsp;P (kg), Soluble Reactive&nbsp;P (kg), Particulate&nbsp;P (kg).
  </p>
{% endset %}

{% call ui.control_shell(
     form_id="observed_form",
     title="Observed Data Model Fit",
     collapsible=True,
     description=description,
     status_panel_options={"id": "observed_status_panel"},
     stacktrace_panel_options={"panel_id": "observed_stacktrace_panel", "body_id": "stacktrace"}
   ) %}

  <section class="wc-observed">
    {{ ui.textarea_field(
         "observed_text",
         "Observed time series",
         rows=12,
         help="Paste CSV text with a Date column and optional measures.",
         extra_control_class="disable-readonly"
       ) }}

    {% call button_row() %}
      <button
        id="btn_run_observed"
        type="button"
        class="pure-button pure-button-primary disable-readonly"
        data-action="observed-run">
        <img
          id="run_observed_lock"
          src="{{ url_for('static', filename='open-iconic/png/lock-locked-2x.png') }}"
          alt=""
          style="display:none;">
        <span>Run Model Fit</span>
      </button>
    {% endcall %}
    {{ ui.job_hint("hint_run_observed", extra_class="wc-field__help") }}
  </section>

{% endcall %}
