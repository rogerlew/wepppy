{# Doc: controllers_js/README.md â€” Omni Controller Reference (2024 helper migration) #}
{% import "controls/_pure_macros.html" as ui %}
{% from "shared/console_macros.htm" import button_row %}

{% set description %}
  <p class="wc-text-muted">
    Configure Omni mitigation scenarios to run after WEPP finishes. The builder lets you mix uniform burn
    severities, treatments, mulching, and uploaded SBS rasters. Scenarios execute in the order listed.
  </p>
  <p class="wc-text-muted">
    SBS map uploads must be GeoTIFF/IMG files 100&nbsp;MB or smaller and should align with the project DEM.
  </p>
{% endset %}

{% call ui.control_shell(
     form_id="omni_form",
     title="Omni Scenario Runner",
     collapsible=False,
     description=description
   ) %}

  <div class="wc-stack">
    <div class="wc-card">
      <div class="wc-card__body wc-stack">
        <div id="scenario-container" class="wc-stack"></div>
        <div>
        <button id="add-omni-scenario"
                type="button"
                class="pure-button pure-button-secondary disable-readonly"
                data-omni-action="add-scenario">
            Add scenario
        </button>
      </div>
    </div>
    </div>
    <p class="wc-text-muted">
      Mulching and thinning scenarios depend on their base scenario outputs. Place base scenarios ahead of
      derived treatments so Omni can reuse results efficiently.
    </p>
  </div>

  {% call button_row() %}
    <button id="btn_run_omni"
            class="pure-button pure-button-primary disable-readonly"
            type="button"
            data-omni-action="run-scenarios">
      Run Omni
    </button>
  {% endcall %}
  <p id="hint_run_omni" class="wc-field__help" aria-live="polite"></p>

{% endcall %}
