<h5>Station</h5>
{% if station_meta == none %}
    <p><i>Station information is not available</i></p>
{% else %}
<dl class="dl-horizontal">
    <dt>Station Description:</dt>
    <dd>{{ station_meta.desc }}</dd>
    <dt>Station ID:</dt>
    <dd>{{ station_meta.id }}</dd>    
    <dt>Location:</dt>
    <dd>{{ station_meta.longitude }}, {{ station_meta.latitude }}</dd>
    <dt>Elevation:</dt>
    <dd>{{ station_meta.elevation * 0.3048}} m</dd>
</dl>
{% endif %}
{% set climate_files_content %}
  {% if climate.ss_batch_storms %}
    <h5>Single Storm Batch Climates</h5>
    <dl class="dl-horizontal">
      {% for d in climate.ss_batch_storms %}
        <dd><a href="{{ url_for_run('browse.browse_tree', runid=runid, config=config, subpath='climate/' ~ d.cli_fn) }}" target="_blank">{{ d.cli_fn }}</a></dd>
      {% endfor %}
    </dl>
  {% else %}
    <h5>Global Climate</h5>
    <dl class="dl-horizontal">
      <dd><a href="{{ url_for_run('browse.browse_tree', runid=runid, config=config, subpath='climate/' ~ climate.par_fn) }}" target="_blank">{{ climate.par_fn }}</a></dd>
      <dd><a href="{{ url_for_run('browse.browse_tree', runid=runid, config=config, subpath='climate/' ~ climate.cli_fn) }}" target="_blank">{{ climate.cli_fn }}</a></dd>
    </dl>
  {% endif %}
  <h5>Climate Build Log</h5>
  <p>
    <a href="{{ url_for_run('browse.browse_tree', runid=runid, config=config, subpath='climate/status.log') }}" target="_blank">View Climate Build Log</a>
  </p>
{% endset %}
{% if climate.monthlies is not none %}
 {% set monthly_ppts = climate.monthlies.ppts %}
 {% set monthly_nwds = climate.monthlies.nwds %}
 {% set monthly_tmax = climate.monthlies.tmaxs %}
 {% set monthly_tmin = climate.monthlies.tmins %}
 {% set annual_precip = monthly_ppts | sum %}
 {% set average_tmax = mean(monthly_tmax) %}
 {% set average_tmin = mean(monthly_tmin) %}

 <h5>Summary for the climate generated by CLIGEN at watershed centroid</h5>
 <div class="wc-stack">
   <div class="wc-summary-pane">
     <dl class="wc-summary-pane__list">
       <div class="wc-summary-pane__item">
         <dt class="wc-summary-pane__term">Average annual precip</dt>
         <dd class="wc-summary-pane__definition">
           {{ unitizer(annual_precip, 'in') | safe }} {{ unitizer_units('in') | safe }}
         </dd>
       </div>
       <div class="wc-summary-pane__item">
         <dt class="wc-summary-pane__term">Average monthly T max</dt>
         <dd class="wc-summary-pane__definition">
           {{ unitizer(average_tmax, 'degf') | safe }} {{ unitizer_units('degf') | safe }}
         </dd>
       </div>
       <div class="wc-summary-pane__item">
         <dt class="wc-summary-pane__term">Average monthly T min</dt>
         <dd class="wc-summary-pane__definition">
           {{ unitizer(average_tmin, 'degf') | safe }} {{ unitizer_units('degf') | safe }}
         </dd>
       </div>
     </dl>
   </div>

   <div class="wc-table-wrapper">
     <table class="wc-table wc-table--dense">
       <thead>
         <tr>
           <th scope="col">Metric</th>
           <th scope="col" class="wc-text-center">Jan</th>
           <th scope="col" class="wc-text-center">Feb</th>
           <th scope="col" class="wc-text-center">Mar</th>
           <th scope="col" class="wc-text-center">Apr</th>
           <th scope="col" class="wc-text-center">May</th>
           <th scope="col" class="wc-text-center">Jun</th>
           <th scope="col" class="wc-text-center">Jul</th>
           <th scope="col" class="wc-text-center">Aug</th>
           <th scope="col" class="wc-text-center">Sep</th>
           <th scope="col" class="wc-text-center">Oct</th>
           <th scope="col" class="wc-text-center">Nov</th>
           <th scope="col" class="wc-text-center">Dec</th>
           <th scope="col">Units</th>
         </tr>
       </thead>
       <tbody>
         <tr>
           <th scope="row">Mean precip</th>
           {% for value in monthly_ppts %}
           <td class="wc-text-right">{{ unitizer(value, 'in') | safe }}</td>
           {% endfor %}
           <td>{{ unitizer_units('in') | safe }}</td>
         </tr>
         <tr>
           <th scope="row">Num wet days</th>
           {% for value in monthly_nwds %}
           <td class="wc-text-right">{{ value | round | int }}</td>
           {% endfor %}
           <td>days</td>
         </tr>
         <tr>
           <th scope="row">T max</th>
           {% for value in monthly_tmax %}
           <td class="wc-text-right">{{ unitizer(value, 'degf') | safe }}</td>
           {% endfor %}
           <td>{{ unitizer_units('degf') | safe }}</td>
         </tr>
         <tr>
           <th scope="row">T min</th>
           {% for value in monthly_tmin %}
           <td class="wc-text-right">{{ unitizer(value, 'degf') | safe }}</td>
           {% endfor %}
           <td>{{ unitizer_units('degf') | safe }}</td>
         </tr>
       </tbody>
     </table>
   </div>
 </div>
{% endif %}

<details class="wc-collapse" id="climate-files-log">
  <summary class="wc-collapse__summary">
    <span class="wc-collapse__title">View Climate Files and Log</span>
    <span class="wc-collapse__icon" aria-hidden="true"></span>
  </summary>
  <div class="wc-collapse__content">
    {{ climate_files_content | trim | safe }}
  </div>
</details>
