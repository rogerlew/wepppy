<!-- wepppy/weppcloud/routes/batch_runner/templates/create_page_bootstrap.js.j2 -->
<script>
"use strict";

window.batchRunnerBootstrap = {
    enabled: {{ feature_enabled | tojson }},
    batchName: {{ (batch_name or form_state.batch_name) | tojson }},
    state: {{ state_payload | tojson }}
};

document.addEventListener('DOMContentLoaded', function () {
    if (typeof window.BatchRunner === 'undefined' || typeof window.BatchRunner.getInstance !== 'function') {
        console.warn('BatchRunner control is not yet available.');
        return;
    }
    var control = window.BatchRunner.getInstance();
    if (typeof control.initCreate === 'function') {
        control.initCreate(window.batchRunnerBootstrap);
    } else if (typeof control.init === 'function') {
        control.init(window.batchRunnerBootstrap);
    }
});
</script>
